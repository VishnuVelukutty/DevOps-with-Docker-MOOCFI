FROM ubuntu:latest

# Install dependencies
RUN apt-get update 
RUN apt-get install -y --no-install-recommends ca-certificates golang git
RUN rm -rf /var/lib/apt/lists/*

# Set Go environment variables
ENV GOPATH /go
ENV PATH $GOPATH/bin:/usr/local/go/bin:$PATH

# Set the working directory
WORKDIR /backend

# Copy the backend files
COPY example-backend/ .

# Set Git to perform SSL certificate verification
RUN git config --global http.sslVerify true

# Build the backend
RUN go build server

# Expose the port
EXPOSE 8080

# Command to run the server
CMD ["./server"]